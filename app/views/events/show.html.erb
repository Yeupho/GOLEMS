<p id="notice"><%= notice %></p>

<div class="page-header">
  <div class="row">

    <div class="col-lg-8">
      <h1><%= @event.event_name %>
        <small></small>
      </h1>
    </div>
    <div class="col-lg-4">
      <div class="row text-center">
        <div class="col-lg-5">
          <button type="button" class="btn btn-primary btn-md show-btn" data-toggle="modal" data-target="#editModal">
            <span class="glyphicon glyphicon-edit"></span>
            <br>
            Edit
          </button>
        </div>
        <div class="col-lg-5">
          <%= link_to '<span class="glyphicon glyphicon-remove-sign"></span><br>Back'.html_safe, events_path, class: "btn btn-primary btn-md show-btn", :method => :get %>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <div class="well">

      <div class="row">
        <div class="col-lg-6">
          <p>
            <strong>Category:</strong>
            <%= @event.event_type.event_type_desc %>
          </p>
        </div>
        <div class="col-lg-2 text-center">
          <div class="row"><strong>Color</strong></div>
          <div class="row"><span class="simplecolorpicker icon color-circle" style="background-color: <%= @event.color.color_code %>;"></span></div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <div class="row">
            <div class="col-lg-12">
              <p>
                <strong>Date:</strong>
                <%= @event.event_date.strftime("%B %-d, %Y") %>
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <p>
                <strong>Time:</strong>
                <%= @event.start_time.strftime("%l:%M %p") %> - <%= @event.end_time.strftime("%l:%M %p") %>
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <p>
            <strong>Description</strong><br>
            <blockquote>
              <%= @event.event_description %>
            </blockquote>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>

<p>
  <strong>Event status:</strong>
  <%= @event.event_status.event_status_desc %>
</p>

<h1>Customer Events</h1>

<table class="table table-hover">
  <thead>
  <tr>

    <th>Customer Name</th>
    <th>Kids painting</th>
    <th>Adults painting</th>
    <th>Visitors</th>
    <th>Number in party</th>
    <th>Archive</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @customer_events.each do |customer_event| %>
      <% running_total =  customer_event.number_in_party - (customer_event.kids_painting + customer_event.adults_painting) %>
      <tr data-link="<%= customer_event_path(customer_event) %>" class="clickable-row">
        <td><%= customer_event.customer.first_name %> <%= customer_event.customer.last_name %></td>
        <td><%= customer_event.kids_painting %></td>
        <td><%= customer_event.adults_painting %></td>
        <td><%= running_total %></td>
        <td><%= customer_event.number_in_party %></td>
        <td><%= link_to 'Archive', customer_event, method: :delete,class: 'btn btm-mini btn-danger', data: { confirm: 'Are you sure?' } %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<%= render 'events/show/edit_modal' %>